<html>
<head>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="css/global.css" ／>
	<link rel="stylesheet" href="css/module.css" ／>
	<script type="text/javascript" src="js/jquery.min.js"></script>
</head>
<body>
	<script>
		function GetQueryString(name) {
		    var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
		    var r = window.location.search.substr(1).match(reg);
		    if(r!=null)return  unescape(r[2]); return null;
		}
		$(document).ready(function() {
			login = GetQueryString("login");
			page = Number(GetQueryString("page"));
			show = GetQueryString("show");
			module = GetQueryString("m");

			//login choose
			if(login == null || login != "login") login = "notLogin";
			if(login == "notLogin") {
				$("#login").hide();
				$("#personalModuleList").hide();
				$("#"+login).show();
				$("#homepageHref").attr("href","main.html");
			}
			else {
				$("#notLogin").hide();
				$("#"+login).show();
				$("#personalModuleList").show();
				$("#homepageHref").attr("href","main.html?login=login");
			}

			//module choose
			if(module == null || module == "") module = "newest";
			$("#moduleTitle").attr("src", "img/"+module+".png");
			var moduleUpper = module;
			$("#pathTitle").text(module.charAt(0).toUpperCase()+module.substr(1));
			
			//show choose
			if(show == null || show == "") show = "all";
			$("#"+show).css("background-color", "rgba(70, 93, 76, 1.0)");
			$("#all").attr("onclick", "window.location.href='module.html?login="+login+"&m="+module+"&show=all&page=1'");
			$("#hot").attr("onclick", "window.location.href='module.html?login="+login+"&m="+module+"&show=hot&page=1'");
			$("#elite").attr("onclick", "window.location.href='module.html?login="+login+"&m="+module+"&show=elite&page=1'");
			$("#"+show).attr("onclick", "");

			//page choose
			totalPage = 234;
			$("#totalPage").text("/ "+totalPage);
			if(page == NaN || page > totalPage || page < 1) page = 1;
			if(totalPage <= 6) {
				for(var i = 1; i <= totalPage; i++) {
					$("#page"+i).text(i);
					$("#page"+i).attr("onclick", "window.location.href='module.html?login="+login+"&m="+module+"&show="+show+"&page="+i+"'");
					if(i == page) {
						$("#page"+i).addClass("choose");
					}
				}
				for(var i = totalPage + 1; i <= 6; i++) {
					$("#page"+i).hide();
				}
			}
			else {
				if(page < 4) {
					for(var i = 1; i < 6; i++) {
						$("#page"+i).text(i);
						$("#page"+i).attr("onclick", "window.location.href='module.html?login="+login+"&m="+module+"&show="+show+"&page="+i+"'");
						if(i == page) {
							$("#page"+i).addClass("choose");
							$("#page"+i).attr("onclick", "");
						}
					}
					$("#page6").text("..."+totalPage);
					$("#page6").attr("onclick", "window.location.href='module.html?login="+login+"&m="+module+"&show="+show+"&page="+totalPage+"'");
				}
				else {
					$("#page1").text("1...");
					$("#page1").attr("onclick", "window.location.href='module.html?login="+login+"&m="+module+"&show="+show+"&page=1'");
					if(page < totalPage - 3) {
						for(var i = 2; i < 6; i++) {
							$("#page"+i).text(i + page - 3);
							$("#page"+i).attr("onclick", "window.location.href='module.html?login="+login+"&m="+module+"&show="+show+"&page="+(i+page-3)+"'");
							if(i == 3) {
								$("#page"+i).addClass("choose");
								$("#page"+i).attr("onclick", "");
							}
						}
						$("#page6").text("..."+totalPage);
						$("#page6").attr("onclick", "window.location.href='module.html?login="+login+"&m="+module+"&show="+show+"&page="+totalPage+"'");
					}
					else {
						for(var i = 2; i <= 6; i++) {
							$("#page"+i).text(i + totalPage - 6);
							$("#page"+i).attr("onclick", "window.location.href='module.html?login="+login+"&m="+module+"&show="+show+"&page="+(i+totalPage-6)+"'");
							if(i + totalPage - 6 == page) {
								$("#page"+i).addClass("choose");
								$("#page"+i).attr("onclick", "");
							}
						}
					}
				}
			}
		});

		function pagePrev() {
			if(page > 1) {
				window.location.href='module.html?login='+login+'&m='+module+'&show='+show+'&page='+(page-1);
			}
		}
		function pageNext() {
			if(page < totalPage) {
				window.location.href='module.html?login='+login+'&m='+module+'&show='+show+'&page='+(page+1);
			}
		}
		function pageJump() {
			var jump = Number($("#searchPage").val());
			if(jump > 0 && jump <= totalPage) {
				window.location.href='module.html?login='+login+'&m='+module+'&show='+show+'&page='+(jump);
			}
			else {
				alert("Invalid page");
			}
		}
		function postJump() {
			$(".mainPage").eq(0).scrollTop(400);
		}
	</script>
	<div class="sideBar">
		<div class="logo"><img src="img/logo.png" /></div>
		<div class="personalInfo">
			<div class="isLogin" id="login">
				<div class="pPhoto" style="cursor: pointer;" onclick="window.location.href='personalData.html'"><img src="img/man.png" /></div>
				<div class="name">name</div>
				<div class="pInfo" id="grade">grade: 2</div>
				<div class="pInfo" id="article">article: 8</div>
			</div>
			<div class="notLogin" id="notLogin">
				<div class="pPhoto"><img src="img/profile.png" /></div>
				<input type="text" class="loginInput" placeholder="Username" />
				<input type="text" class="loginInput" placeholder="Password" />
				<div class="forgetPwd">Forgot password?</div>
				<div class="buttonLine">
					<div class="loginButton" onclick="window.location.href='main.html?login=login'">Login</div>
					<div class="loginButton registerButton" onclick="window.open('register.html')">Register</div>
				</div>
				<div class="buttonLine">
					<img src="img/qq2.png" class="thirdPlatformButton" />
					<img src="img/wechat2.png" class="thirdPlatformButton" />
					<img src="img/weibo2.png" class="thirdPlatformButton" />
				</div>
			</div>
		</div>
		<div class="personalModuleList" id="personalModuleList">
			<div class="personalModule choose" id="pModule0" onclick="window.location.href='main.html?login=login'">
				<img src="img/arrow.png" class="arrow arrowChoose" /><img src="img/homepage.png" class="title" />
			</div>
			<div class="personalModule" id="pModule1" onclick="window.location.href='favourite.html?show=all&page=1'">
				<img src="img/arrow.png" class="arrow" /><img src="img/favorites.png" class="title" />
			</div>
			<div class="personalModule" id="pModule2">
				<img src="img/arrow.png" class="arrow" /><img src="img/mail2.png" class="title" />
			</div>
			<div class="personalModule" id="pModule3" onclick="window.location.href='personalData.html'">
				<img src="img/arrow.png" class="arrow" /><img src="img/settings.png" class="title" />
			</div>
			<div class="personalModule" id="pModule4" onclick="window.location.href='friend.html?page=1'">
				<img src="img/arrow.png" class="arrow" /><img src="img/friends.png" class="title" />
			</div>
		</div>
	</div>
	<div class="mainPage">
		<div class="searchBar">
			<div class="blank"></div>
			<div class="context">
				<div class="search">
					<img src="img/search.png" class="logo" />
					<input type="text" name="search" placeholder="search" />
				</div>
				
			</div>
			<div class="blank"></div>
		</div>
		<div class="main" style="background-image: url(img/background.png)">
			<div class="blank"></div>
			<div class="mainContent">
				<div class="path"><a href="main.html" id="homepageHref">Homepage</a> >> <a href="" id="pathTitle"></a></div>
				<div class="module">
					<div class="topBar">
						<div class="moduleTop"></div>
						<div class="moduleTitle">
							<div class="title"><img src="" id="moduleTitle" /></div>
							<div class="inlineSearch">
								<img src="img/search.png" class="logo" />
								<input type="text" name="search" placeholder="search" />
							</div>
						</div>
						<div class="otherInfo">
							<div class="info">
								<div>Online:</div><div class="red">&nbsp&nbsp 18 &nbsp&nbsp</div>
								<div>Posts:</div><div class="red">&nbsp&nbsp 1250 &nbsp&nbsp</div>
								<div>Today:</div><div class="red">&nbsp&nbsp 25 &nbsp&nbsp</div>
							</div>
							<div class="postButton" onclick="postJump()">Post</div>
						</div>
						<div class="blankBottom"></div>
					</div>
					<div class="buttonBar">
						<div class="button" id="all">All</div>
						<div class="button" id="hot">Hot</div>
						<div class="button" id="elite">Elite</div>
					</div>
					<div class="mainContent">
						<div class="moduleTop"></div>
						<div class="articleList">
							<div class="titleLine">
								<div class="title">Title</div>
								<div class="other">Author</div>
								<div class="other">Reply/View</div>
								<div class="other">Last Post</div>
							</div>
							<div class="article grey" onclick="window.open('postItem.html?login=login&page=1')">
								<div class="point"><div class="dot"></div></div>
								<div class="title">
									<div class="topContent">bbPress is forum software, made the World. Long long long long long long long long long long</div>
									<div class="top">Top</div>
									<img src="img/clip.png" class="attachment" />
								</div>
								<div class="other">
									<div class="author">Helen</div>
									<div class="date">2017-03-25</div>
								</div>
								<div class="other">2/138</div>
								<div class="other">
									<div class="author">Lily</div>
									<div class="date">2017-03-26</div>
								</div>
							</div>
							<div class="article" onclick="window.open('postItem.html?login=login&page=1')">
								<div class="point"><div class="dot"></div></div>
								<div class="title">
									<div class="topContent">bbPress is forum software, made the World. Long long long long long long long long long long</div>
									<div class="top">Top</div>
								</div>
								<div class="other">
									<div class="author">Helen</div>
									<div class="date">2017-03-25</div>
								</div>
								<div class="other">2/138</div>
								<div class="other">
									<div class="author">Lily</div>
									<div class="date">2017-03-26</div>
								</div>
							</div>
							<div class="article grey" onclick="window.open('postItem.html?login=login&page=1')">
								<div class="point"><div class="dot"></div></div>
								<div class="title">
									<div class="content">bbPress is forum software, made the World. Long long long long long long long long long long</div>
									<img src="img/clip.png" class="attachment" />
								</div>
								<div class="other">
									<div class="author">Helen</div>
									<div class="date">2017-03-25</div>
								</div>
								<div class="other">2/138</div>
								<div class="other">
									<div class="author">Lily</div>
									<div class="date">2017-03-26</div>
								</div>
							</div>
							<div class="article" onclick="window.open('postItem.html?login=login&page=1')">
								<div class="point"><div class="dot"></div></div>
								<div class="title">
									<div class="content">bbPress is forum software, made the World</div>
									<img src="img/clip.png" class="attachment" />
								</div>
								<div class="other">
									<div class="author">Helen</div>
									<div class="date">2017-03-25</div>
								</div>
								<div class="other">2/138</div>
								<div class="other">
									<div class="author">Lily</div>
									<div class="date">2017-03-26</div>
								</div>
							</div>
							<div class="blankBottom"></div>
						</div>
					</div>
				</div>
				<div class="pageModule">
					<div class="jumpButton" onclick="pageJump()">Jump</div>
					<div class="totalPage" id="totalPage">/ 234</div>
					<input type="text" class="searchPage" id="searchPage" placeholder="page"/>
					<div class="pageLine">
						<div class="page" style="margin-right: 12px;" onclick="pagePrev()">Previous</div>
						<div class="page" id="page1"></div>
						<div class="page" id="page2"></div>
						<div class="page" id="page3"></div>
						<div class="page" id="page4"></div>
						<div class="page" id="page5"></div>
						<div class="page" id="page6"></div>
						<div class="page" style="margin-left: 15px" onclick="pageNext()">Next</div>
					</div>
				</div>
				<div class="postModule" id="postModule">
					<div class="titleLine">
						<div class="titleText">Title</div>
						<input type="text" class="titleInput" placeholder="title" />
						<div class="attachmentText">Attachment</div>
						<img src="img/clip.png" class="attachment" onclick="alert('ha')" />
					</div>
					<textarea placeholder="Write your content here"></textarea>
					<div class="postButton">Post</div>
				</div>
				<div class="bottomInfo">
					<p>广告业务|合作交流|联系我们|技术支持</p>
					<p>Copyright©️ 2016-2017 DBEnglish版权所有</p>
					<p>本站信息均由网民提供，严禁在本论坛发表与中华人民共和国法律相抵触的言论</p>
				</div>
			</div>
			<div class="blank"></div>
		</div>
	</div>
</body>
</html>